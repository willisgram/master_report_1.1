%===================================== CHAP 3 =================================

\chapter{Literature Review}

The literature review focuses on academic work related to the FPLDP. First, Section \ref{Literature_fantasy_real} compares Fantasy Football to real football. By Fantasy Football, all Fantasy Sports with basis in football are meant. Further, Section \ref{Opt_Models_for_Fantasy_Sports} focuses on use of operations research in sports, Fantasy Sports and Fantasy Football. Next, Section \ref{Forecasting_of_future_performance} focuses on forecasting of player performance. This includes forecasting of individual player performance, rating the quality of football teams and works related to the existence of a home field advantage. Section \ref{Other_Relevant_Research} draws parallels to other well-studied problems. Finally, the chapter is completed by emphasizing our contribution.

\section{Football Team Composition} \label{Literature_fantasy_real}

Multiple studies are devoted to the topic of team selection in football. For instance, \cite{Boon} provide an optimization model for selecting the line-up of sports teams, accounting for questions like "How to select an optimal line-up from the set of all candidates in different positions?". Further, \cite{Trninic} discuss the importance of individual player's roles and tasks when selecting the starting line-up, as they focus on finding the position and role most suitable for each player. They argue that consistency is an important consideration when selecting a line-up. Moreover, \cite{Ozceylan} identifies key performance criteria for each position and suggest an approach for selecting the players with the greatest contribution to the team. Similarly, \cite{Tavana} propose a framework for player selection and team formation with regards to determining the collection of individual players that forms an effective team. \cite{Pantuso} proposes a stochastic programming approach for composition of football teams. The approach takes the requirement of a mix of skills, competition regulations and budget limits into consideration. 


\newpar

When selecting a real-life football line-up, other considerations are faced than when selecting a Fantasy Football line-up. For instance, in real football it is important that the players hold a necessary set of skills that are compatible to the team's organization of play \citep{Pantuso}. Furthermore, a quality like leadership is considered important when selecting the captain. In addition, different skills are required for different positions on the field \citep{Boon}. Moreover, it is important that the selected players have a good chemistry and play each other better. Hence, in real-life football several factors are considered when selecting the team composition that are not important for the FPL. In FPL, it is only important to select players that perform well in terms of Fantasy Premier League points. Thus, the chemistry between players has little impact, as the team mainly consists of players that do not play in the same club. In addition, while leadership ability is important when selecting the captain of a real-life football line-up, it is an irrelevant consideration with regards to FPL line-ups, as the player with the highest expected points should be chosen. Moreover, player skills like stamina, interceptions and passing have a low impact for the points obtained by a FPL player. For instance, N'golo Kant\'e, the winner of the Professional Footballers' Association (PFA) Players' Player of the year award in 2017 \citep{Skysports_Kante}, is considered a hard working midfield anchor. During the 2016-2017 season, Kant\'e earned a total of 83 points in FPL, scoring 1 goal, having 1 assist and receiving 9 yellow cards. By comparison, the best FPL midfielder in terms of FPL points, Alexis SÃ¡nchez, earned 264 points. However, Kant\'e's contribution was important for Chelsea who won the Premier League that season. Thus, although Fantasy Premier League is based upon the performances of real football, there are significant differences in terms of selecting the team. While FPL managers should mainly focus on players that score goals, have assists and keep clean sheets, actual football managers have to ensure that the team is composed with the mix of required and compatible skills \citep{Pantuso}. Furthermore, other distinctions such as transfer rules and the gamechips make the problem of picking a selected squad in FPL and a real-life football team different. Hence, uncritically applying models from real-life football to the FPL can be inappropriate.



\section{Operations Research in Sports} \label{Opt_Models_for_Fantasy_Sports}

In recent years, the development of literature in sport analytics related to decision making has been rapid. Well known journals in statistics, applied mathematics, operations research and economics have published a great number of articles on this field \citep{Coleman}. An area with great progress within operations research is called "Sports Scheduling". This field of research contains problems which involve deciding optimal league seasons' schedules for different sports. The arena of sports scheduling has existed for over 40 years, but only until recently the number of papers has increased significantly \citep{Kendall}. The use of operations research can be explained by the growing complexity of playoff structures, league divisions and opposing demands from constituent teams and other stakeholders. Its use has been investigated in sports including volleyball (\cite{arg_volleyball}), table-tennis (\cite{Mattfeld}; \cite{Knust}), cricket (\cite{Mwright}), basketball (\cite{Wright}; \cite{van_Voorhis}; \cite{Henz}), baseball (\cite{Trick}), Canadian football (\cite{Kostuk}) and softball (\cite{Saur}). In football, sports scheduling is also prominent. \cite{Bartsch} scheduled the professional soccer leagues of Austria and Germany. Besides constraints for inner-league requirements and preferences, the European top soccer leagues also have to take into account constraints related to European Cup matches (Champions League, UEFA Cup). They developed models and applied greedy algorithms and branch and bound method which yielded reasonable schedules quickly. The schedules were applied by the professional soccer league in both Austria and Germany. Further, \cite{Della} scheduled the Italian football league where the schedules also were balanced with respect to additional cable television requirements. Further, Chile is perhaps one of the countries where sports scheduling in football has been most present. Since 2005, the Chilean professional soccer has adopted a scheduling system that is based on an integer linear programming model. \cite{Guajardo} generated schedules that gave teams benefits such as higher incomes, lower cost, higher fan attendance and fairer seasons. Their work was further expanded \citep{Duran}, when they considered challenges for Chile's Second Division soccer league. Similar scheduling problems are also studied in Belgium by \cite{Goossens} and in Denmark by \cite{Rasmussen}. Finally, \cite{Kendall} addressed the special case of English football fixtures over holiday periods. In England, during the Christmas and New Years period teams can play up to four matches in less than ten days. \cite{Kendall} considered the minimization of the travel distances by English football clubs during this period, and generated schedules which had 25\% lower total travel distances than the fixtures actually used. 

\newpar

In the world of Fantasy Sports, the use of operations research is rather limited. Most of the research focuses on American Football and the National Football League (NFL) Fantasy Draft. This could partly be explained by more attractive monetary prizes compared to e.g., Fantasy Football leagues. For the NFL Fantasy Draft, optimization models and solution methods have been proposed by \cite{Fry}, \cite{Gibson} and \cite{Becker}. Though Fantasy Premier League and NFL Fantasy Draft are both Fantasy Sports, they are essentially different problems. For instance, in NFL Fantasy Draft leagues only one manager within a league can own a given player - while in FPL this is not a restriction. Furthermore, for every gameweek pairs of managers are matched head to head where the one with highest points wins - a feature that is not present in FPL. The most profound similarity that exists is that in each gameweek a fixed number of players in different roles have to be picked. In addition, decisions on starting line-ups are made. 

%However, player performance predictions are important in both games. This topic is further discussed in Section \ref{Forecasting_of_future_performance}.


\newpar

\cite{Mathsports} discussed the common characteristics in Fantasy Sports games, where the common game rules characteristics are the most relevant. They presented a mixed integer programming model for finding an optimal set of ex-post decisions in Fantasy Sports games under the assumption that all data are known in advance. The model is tested on a fantasy cycling game with all data known beforehand. Without the gamechips, captain and vice-captain, part of the model can with modification be used for FPLDP. However, including the gamechips increases the complexity and calls for a more sophisticated mathematical model. 

\newpar

To the author's knowledge, there is no operations research literature which explicitly discusses the FPLDP. However, articles related to Fantasy Football exists. \cite{Matthews} were the first to develop a sequential team formation algorithm on Fantasy Premier League. They modelled the Fantasy Team Composition Problem as a belief-sate Markov Decision Problem and solved it using Bayesian Q-learning. Their model produced promising results as it outperformed most human FPL managers. They only modelled the Wildcard gamechip, with the qualitative assessment of the opportunity to play it in the 8th and 23rd gameweek. Their results motivate the development of analytic tools for the FPLDP. 

\newpar

\cite{Bonomo} presented two optimization models for the Argentinian Fantasy Football. The first model called \textit{a priori}, determines line-ups and transfers based on predictions of player points, while the second model called \textit{a posteriori} determines the optimal line-ups with data known beforehand. The results obtained by the \textit{a priori} model positioned within the top 0.2 \% of all managers. They are the first to develop and solve an optimization model for Fantasy Football, and it encourages the use of operations research on this field. The points in the Argentinian Fantasy Football are to a high degree allocated in the same manner as in the English Fantasy Premier League. They are both set by objective statistics (goals, assists, yellow cards etc.) and subjective statistics determined by a newspaper that are somewhat analogous to the Bonus Points System in FPL (see Section \ref{point_system} and Appendix \ref{A1_BPS}). Comparison of the optimization model purposed by \cite{Bonomo} with the one developed by \cite{Mathsports}, shows that many of the constraints can be related. Further, as with the points allocation, the rules in Argentinian Fantasy Football resemble much of the same rules and features of FPL. Nevertheless, there are some major exceptions: 


\begin{itemize}
    \item Gamechips are a feature which is only present in the FPL.  
    \item Only in FPL player values can increase or decrease based on how many managers select them.
    
    \item  The Argentinian Fantasy League allows 4 free transfers in each gameweek, while FPL allocate 1 each gameweek. Further, penalized transfers is only featured in FPL.
    
    
    \begin{comment}
     The Argentinian Fantasy League allows 4 free transfers in each gameweek, while FPL allocate 1 each gameweek. Further, in FPL, each penalized transfers deducts 4 points. Therefore, a manager in the Argentinian Fantasy Football are to a greater extent guarded from factors such as injury, suspension or players not performing well. A manager in FPL is more exposed to these factors and faces a more difficult choice. If the decision to make a transfer is first made, it is likely one has to do more than one transfer to comply with the budget constraint. That is, there is a reasonable chance that in order to afford a new player, the manager also has to trade to a cheaper player in another position. By comparing player to player, it only pays off to take the 4 points hit from a penalized transfer if that player earns 4 or more points than the player which was transferred out.
     
     It calls for FPL managers to be even better skilled to pick right players to double their points.
    \end{comment}

    \item The decisions regarding captain and vice-captain choices are only featured in FPL.  
\end{itemize}

As seen by the differences, a manager in FPL faces a more complex set of decisions than a manager in the Argentinian Fantasy League and thus an increased level of uncertainty. 

\newpar


\begin{comment}
There is limited research available on optimization of a Fantasy Premier League team. However, due to the large amount of active NFL Fantasy Sports players, literature is available for both season- and weekly format. \cite{King} suggested a model for predicting points for the quarterbacks in the NFL, using Backward Stepwise regression and Support Vector regression models in his research. Further, he predicted fantasy points by use of Artificial Neural Networks. Similar approaches can be used in order to predict the performance of the Premier League players.
\end{comment}


\section{Forecasting of Player Performance} \label{Forecasting_of_future_performance}

The ability of predicting future player performances is perhaps the most important skill required in Fantasy Premier League. As stated by \cite{Smith}, fantasy managers have a tendency of ignoring historical statistics when selecting their line-up. Since one aim of this thesis is to compete against human managers in FPL, forecasting of player performance is important. 

\subsection{Individual Player Performance} \label{Forecasting_of_player_performance}

\cite{Yang} predicted the results of the 2016 NBA season by running a least-square linear regression model on player's individual statistics and the win-ratio of their team, thus predicting the results of the NBA matches based on player performances. The explanatory variables primarily used are well-known statistics such as points scored, assists, rebounds, steals and blocks. These variables were analysed for the past 20 seasons in order to predict the outcome of the upcoming season. In order to evaluate the impact of the players, he assigned each player with a player efficiency rating, a number representing a player's effectiveness by a single number. A limitation of Yang's approach is that the data used mainly focused on offensive contributions, hence good defending players are not valued properly. Although this paper focuses on predicting a team's performance and not solely player performance, a similar approach may be used in order to predict the performance of individual Premier League players. 

\newpar

\cite{Hvattum_2015} proposed a top-down rating model for football players, using a regression model to capture how players perform relative to their teammates and to the opposition. They provided a regression based player rating using a plus-minus player statistics, measuring the number of goals scored minus the number of goals conceded when a player is used by the team. Further, they discounted older observations and placed greater emphasis on recent performances. As their model did not sufficiently differentiate between players from different divisions or different league systems, their model was further improved \citep{Hvattum_2017}. The model was extended by adding a factor depending on a player's current league and division. 

\newpar

An approach used for rating the players in the Norwegian Tippeligaen, the top tier of Norwegian football, was suggested by \cite{vabo}. They applied a binary logistic regression in order to assign values to shots attempted in football, hence calculating the probability of a shot resulting in a goal scored. In addition, they developed two Markov game models in order to evaluate all player's actions, not only the shots. Their analysis are made post-game, thus there is no forecasting of player performance. However, the regression variables used and the idea of valuing players using regression are of great interest.

\newpar

As mentioned in Section \ref{Opt_Models_for_Fantasy_Sports}, \cite{Bonomo} proposed a mathematical model for an Argentinian Fantasy League. In addition to the optimization model, they also forecast future performance for the individual players. The forecasts were calculated by averageing the points obtaeind in the three last gameweeks for each particular player. Further, a player's predicted points were multiplied by four deciding factors related to the upcoming match:
\begin{itemize}
    \item 1.05 if the team is playing at home and 0.95 if the team is playing away.
    \item A value between 0.95 and 1.05, linearly dependent on the position in the league table. The players on the team leading the league are weighted by 1.05, while the players on the team in the bottom of the league are weighted by 0.95.
    \item 0.95 to 1.05, depending on a performance streak factor.
    \item A starting line-up factor. This factor is set to 1 for players assumed to be starting in the next gameweek. The factor were based on coachesâ announcements, press reports, or information posted on the game website. 
\end{itemize}

As the problem of modelling the Argentinian Fantasy League resembles the FPLDP, a similar approach can be used for the English Fantasy Premier League. Therefore, in Section \ref{Player_Performance}, the approach suggested by \cite{Bonomo} is modified for the FPL.

\subsection{Rating Football Teams} \label{Strength_of_football_teams} 

The individual performance of a player can be assumed to be impacted by the performance of the player's team. In terms of FPL points, it is reasonable to assume that a player will perform better if he plays for a top-rated team than for a weaker team, as these teams score more goals and keep more clean sheets. Team strengths has been a hot topic in scoreline prediction, i.e. the prediction of final score-lines, for several years. Gamblers try to develop scoreline predictions in order to create realistic odds for upcoming matches, hence trying to beat the bookmakers. In addition to the development of profitable gambling, an appropriate scoreline prediction could be of great use when predicting the future performance of Premier League players. 


\newpar

\cite{Maher} introduced attacking- and defensive strength parameters for each team in order to develop a model calculating the expected goals scored by both a home and away team, where the amount of goals was modelled as a Poisson distribution. This was further extended by \cite{Dixon} who were able to calculate probabilities of different scorelines in a given match, by which they created a strategy for profitable gambling. \cite{Rue} suggested that the attacking- and defensive strengths of a team were time-dependent, and updated the strength estimates using Bayesian methods. In order to do so, they used Markov Chain Monte Carlo iterative simulation techniques. Further, \cite{Crowder} developed a procedure for updating parameter estimates which was computationally less demanding.



\newpar

Although the approach suggested by \cite{Maher} has been improved over the years, there are other ways of determining the strength of a team. In 1978, the Elo rating was introduced by \cite{Elo}. The rating was initially developed for rating the strength of chess players, but has widely been adopted to different sports, including golf, tennis and football. \cite{Hvattum} used the Elo rating in order to rank teams when predicting match results in football. The ratings appeared to be useful in encoding the information of past results for measuring the strength of a team. However, when used in terms of match predictions, the predictions appeared to be considerably less accurate compared to market odds. \cite{vabo} adopted the approach suggested by \cite{Hvattum} for consideration of team strengths as they valued the individual player performance in Norwegian football. In addition, \cite{Leitner} assessed the Elo rating alongside with FIFA/Coca-Cola World Rankings \citep{FIFA} in order to predict the outcome of tournament winners. However, both rating systems were found to be inferior to bookmakers' odds. Hence, it confirms the findings of \cite{Hvattum}. 

\newpar

Other rating systems investigated in the forecasting literature include team strengths estimated by adopting an ordered probit model with one parameter for each team \citep{Graham}, predictions based on \textit{power scores} (ratings inspires by Elo system) and an associated ranking for matches in the National Football League (\citep{Boulier}; \citep{Amundson}). In addition, \cite{Clarke_2} fitted differences in Association of Tennis Professionals (ATP) rating points to a logistic model and used resultant probabilities in a simulation to estimate each player's chance of victory. 

\subsection{Home Field Advantage in Football}\label{HomeFieldAdvantage}

It is often presumed that football teams perform better when playing at home than when playing away. If this is the case, home field advantage may play a role when forecasting the performance of a player for an upcoming match. In the following, academic works related to home field advantage in football is presented.

\newpar

\cite{Nevill} identified likely causes of home field advantage. They discussed four factors thought to be responsible for the home field advantage. These factors were categorized under the general headings of crowd, learning, travel and rule factors. When considering the learning factor, they claimed that the players for the home team were used to play at that particular stadium. There was evidence to suggest that travel factors could be responsible for part of the home field advantage, provided that the journey involved crossing a number of time zones. However, as most of the matches did not require long travels, these factors were not thought to be a major cause of home field advantage. Crowd factors appeared to be the most dominant cause of home field advantage. Rule factors were found to play a minor role in contributing to home field advantage. 

\newpar

\cite{Clarke} used least squares in order to fit a model to the individual match results in English football and found that home field advantage effects on club level. Home field advantages were calculated for all teams in the English Football League from 1981-82 to 1990-91. It was evident that teams with special facilities had significantly higher home field advantage, and that London clubs in general had a lower home field advantage. In addition, they found that the home field advantage had more impact on outcome than on goals margin.

\newpar

\cite{Pollard} analysed over 400,000 sport matches since the start of the main professional sports, including English top division football. They found that the home field advantage in English football decreased from the 1980s to the 2000s. Further, in contrary to \cite{Nevill}, they claimed that travel and familiarity contributed to home field advantage, and found limited support for the contribution of crowd effects. %\cite{Pollard} quantified home field advantage as the percentage points obtained by the home team is of all points obtained. 

%For the English Premier League, they provide results that annual values of home advantage of below 60 \% are not uncommon. 


\section{Connections to Existing Literature}\label{Other_Relevant_Research}

Although this thesis focuses exclusively on optimizing decisions related to Fantasy Premier League, parallels can be drawn to other scientific areas. The Fantasy Premier League Decision Problem shares features with many well-studied problems.  

\newpar

Knapsack problems share several similarities with the FPLDP. A capacity (budget) has to be allocated to items characterized by a weight (cost) and a reward (expected performance). \cite{Kirshner} modelled the problem of selecting free agent players for a NBA squad by using a multiple-choice knapsack model. Here, the rewards are measured in terms of the ability of the players, weights as the salaries and the capacity as the NBA teams' salary cap. Furthermore, \cite{Gibson} used a stochastic knapsack problem in order to make team composition decisions regarding player drafts. Ahead of the American sports seasons, teams sign players according to a pick order. Therefore, players become stochastically unavailable over time, depending on the pick decisions of the teams. Thus, they modelled the drafting problem as a stochastic knapsack problem, where the future availability of the items is considered stochastic. There exist significant differences between the knapsack problem and the FPLDP. First, the FPLDP includes not only adding items to a knapsack, it also involves removing items from the knapsack. This is done in terms of buying and selling players from your selected squad. In addition, since the price of a player changes over time, removal decisions do not only free space to your knapsack, it can also yield a reward in terms of increased or lowered budget. 

\newpar

Similarities can be found between the FPLDP and staffing problems, where one seeks to compose a set of personnel that satisfy the supply and demand of personnel from different categories \citep{Komarudin,Bruecker}. In general, the FPLDP makes decisions in terms of buying and selling players, while staffing problems consider hiring and dismissal of personnel. Although the two problems resemble each other in terms of composing a team, there exist significant differences. First, the FPLDP considers players as assets that can increase the value (budget) of the team, and not only as items used to satisfy a demand. Furthermore, in the FPLDP, players in the same role are heterogeneous, whereas in most staffing problems individuals in the same category are assumed homogeneous. For instance, \cite{Davis} aimed to determine the optimal composition of the pre-hospital medical response team and evaluate the importance of including a doctor to the team. No distinctions between workers in the same category for the staffing problems were made. In the FPLDP, on the other hand, although defenders are evaluated according to the same point system, several factors have an impact of their expected performance. The team of the player, his opponent team and his individual ability of scoring a goal all influence the expected performance.

\newpar

In capacity renewal problems \citep{Chand,Rajagopalan}, machinery is replaced due to damages over time, improved equipment and changes of production \citep{Hopp,Adkins}. Similarly, players are replaced in the FPLDP, but due to change in expected performance. This can be the result of injuries, suspensions or poor recent performance. However, a significant difference between the problems is that while players are considered assets for maximizing expected points, machinery is considered a necessary item in order to satisfy a demand in an efficient way. Furthermore, in the machinery problems, individual machines are often indistinguishable from one another. Hence, different machines can satisfy the same requirements. For the FPLDP however, players are considered unique as the expected performance is dependent on factors such as teammates, opponents and recent individual performance.

\newpar

In transportation and logistics, problems with similar features as the FPLDP can be found. For the long-term vehicle fleet composition \citep{Jabali}, different types of vehicles are needed in order to perform distribution activities, in which size and mix of the fleet are important decision variables. As for the FPLDP, a mix of players are necessary in order to fulfill the formation criteria. Various vehicles may have the same characteristics and can hence be used for the same purposes. For the FPLDP however, although two players can be listed with the same purchase price, their performance in terms of expected points can be significantly different.


\newpar

Finally, there is a large correspondence between FPLDP and portfolio optimization problems (see, e.g., \cite{Markowitz}, \cite{Zenios} and \cite{Speranza}). The FPLDP can be interpreted as the problem of investing in a number of assets (football players) with stochastic returns in order to maximize total return (the total number of points). Furthermore, the budget limit in the FPLDP can be seen as a budget constraint in portfolio optimization. However, in the FPLDP the decisions are binary (a player is either bought or not) while in portfolio optimization fractions of wealth are allocated to different assets. Moreover, the fixed number of assets (players) in FPLDP resembles cardinality-constrained portfolio optimization problems \citep{Chang}. Additionally, while the formation criteria in the FPLDP gives a fixed number of players in each role, cardinality-constrained portfolio optimization problems may impose a minimum or maximum proportion of wealth to be allocated on certain class of assets. Finally, variance in returns is a well known measure of risk in portfolio optimization problems. For the FPLDP, variance can be regarded in a similar manner in order to model the uncertainty in future player performances. \cite{Dailyfantasysports} suggested a stochastic integer program which maximizes the expected payout of a tiered Daily NFL Fantasy Sports by using a stochastic integer program. Here variance in points obtained is used as a measure of risk.



\section{Our Contribution}

As discussed in this literature review, the FPLDP shares similarities with many well-studied optimization problems. Moreover, several optimization models have been suggested for football team composition as well as for other Fantasy Sports (\cite{Fry}; \cite{Gibson}; \cite{Becker}). However, to the best of the authors' knowledge, this is the first mathematical model suggested for the Fantasy Premier League. Further, we have developed the first optimization driven framework that can compete on the same terms as human FPL managers. Finally, the analogy between FPL and portfolio optimization has never been considered in terms of FPL decisions.